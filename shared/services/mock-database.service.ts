import { useState, useEffect } from 'react';

// Mock database service to simulate Prisma operations
// This allows components to be properly connected while database setup is pending\n\ninterface MockPlayer {\n  id: string;\n  email: string;\n  firstName: string;\n  lastName: string;\n  phone?: string;\n  ageGroup: 'UNDER_18' | 'AGES_18_20' | 'AGES_21_PLUS';\n  birthdayMonth?: number;\n  birthdayDay?: number;\n  fargoRating?: number;\n  apaEightBallRank?: string;\n  apaNineBallRank?: string;\n  inHouseRating?: string;\n  createdAt: Date;\n}\n\ninterface MockTournament {\n  id: string;\n  name: string;\n  description?: string;\n  startDate: Date;\n  endDate?: Date;\n  venueId: string;\n  venue?: {\n    id: string;\n    name: string;\n  };\n  isStarted: boolean;\n  isCompleted: boolean;\n  estimatedEntrants?: number;\n  entryFee?: string;\n  defaultChipsPerPlayer?: number;\n  access: 'PUBLIC' | 'PRIVATE' | 'INVITE_ONLY';\n  createdAt: Date;\n}\n\ninterface MockVenue {\n  id: string;\n  name: string;\n  address?: string;\n  phone?: string;\n  email?: string;\n  ageRestriction: string;\n  minorStartTime?: string;\n  minorEndTime?: string;\n  ages18To20StartTime?: string;\n  ages18To20EndTime?: string;\n  useVenueAgeForAllTables: boolean;\n  totalTables: number;\n  ownerId?: string;\n  owner?: {\n    id: string;\n    firstName: string;\n    lastName: string;\n    email: string;\n  };\n  tables: Array<{\n    id: string;\n    number: string;\n    ageRestriction: string;\n  }>;\n  createdAt: Date;\n}\n\n// Mock data storage\nlet mockPlayers: MockPlayer[] = [\n  {\n    id: '1',\n    email: 'john.doe@example.com',\n    firstName: 'John',\n    lastName: 'Doe',\n    phone: '(555) 123-4567',\n    ageGroup: 'AGES_21_PLUS',\n    birthdayMonth: 6,\n    birthdayDay: 15,\n    fargoRating: 650,\n    apaEightBallRank: '6',\n    apaNineBallRank: '7',\n    createdAt: new Date('2024-01-15')\n  },\n  {\n    id: '2',\n    email: 'jane.smith@example.com',\n    firstName: 'Jane',\n    lastName: 'Smith',\n    phone: '(555) 987-6543',\n    ageGroup: 'AGES_18_20',\n    birthdayMonth: 3,\n    birthdayDay: 22,\n    fargoRating: 580,\n    createdAt: new Date('2024-02-10')\n  },\n  {\n    id: '3',\n    email: 'mike.wilson@example.com',\n    firstName: 'Mike',\n    lastName: 'Wilson',\n    ageGroup: 'UNDER_18',\n    birthdayMonth: 11,\n    birthdayDay: 8,\n    fargoRating: 450,\n    createdAt: new Date('2024-01-20')\n  }\n];\n\nlet mockTournaments: MockTournament[] = [\n  {\n    id: '1',\n    name: 'Winter Championship 2026',\n    description: 'Annual winter tournament with chip format',\n    startDate: new Date('2026-02-15T18:00:00'),\n    venueId: '1',\n    venue: { id: '1', name: 'Downtown Billiards' },\n    isStarted: false,\n    isCompleted: false,\n    estimatedEntrants: 32,\n    entryFee: '50.00',\n    defaultChipsPerPlayer: 200,\n    access: 'PUBLIC',\n    createdAt: new Date('2026-01-15')\n  },\n  {\n    id: '2',\n    name: 'Friday Night Special',\n    startDate: new Date('2026-01-31T19:00:00'),\n    venueId: '2',\n    venue: { id: '2', name: 'Metro Sports Bar' },\n    isStarted: true,\n    isCompleted: false,\n    estimatedEntrants: 16,\n    entryFee: '25.00',\n    defaultChipsPerPlayer: 150,\n    access: 'PUBLIC',\n    createdAt: new Date('2026-01-20')\n  }\n];\n\nlet mockVenues: MockVenue[] = [\n  {\n    id: '1',\n    name: 'Downtown Billiards',\n    address: '123 Main St, Downtown',\n    phone: '(555) 555-0123',\n    email: 'info@downtownbilliards.com',\n    ageRestriction: 'MINORS_ALLOWED_LIMITED_HOURS',\n    minorStartTime: '12:00',\n    minorEndTime: '20:00',\n    ages18To20StartTime: '12:00',\n    ages18To20EndTime: '23:00',\n    useVenueAgeForAllTables: true,\n    totalTables: 12,\n    ownerId: '1',\n    owner: {\n      id: '1',\n      firstName: 'John',\n      lastName: 'Doe',\n      email: 'john.doe@example.com'\n    },\n    tables: [\n      { id: '1', number: '1', ageRestriction: 'MINORS_ALLOWED_LIMITED_HOURS' },\n      { id: '2', number: '2', ageRestriction: 'MINORS_ALLOWED_LIMITED_HOURS' },\n      { id: '3', number: 'Bar Table', ageRestriction: 'AGES_21_PLUS_ONLY' }\n    ],\n    createdAt: new Date('2024-01-10')\n  },\n  {\n    id: '2',\n    name: 'Metro Sports Bar',\n    address: '456 Oak Ave, Metro District',\n    phone: '(555) 555-0456',\n    ageRestriction: 'AGES_18_PLUS_ALL_DAY',\n    useVenueAgeForAllTables: false,\n    totalTables: 8,\n    tables: [\n      { id: '4', number: '1', ageRestriction: 'AGES_18_PLUS_ALL_DAY' },\n      { id: '5', number: '2', ageRestriction: 'AGES_21_PLUS_ONLY' }\n    ],\n    createdAt: new Date('2024-01-05')\n  }\n];\n\n// Mock API functions that simulate Prisma operations\nexport class MockDatabaseService {\n  // Player operations\n  static async findPlayers(query?: string) {\n    // Simulate API delay\n    await new Promise(resolve => setTimeout(resolve, 100));\n    \n    let filtered = mockPlayers;\n    \n    if (query) {\n      const lowerQuery = query.toLowerCase();\n      filtered = mockPlayers.filter(player => \n        player.firstName.toLowerCase().includes(lowerQuery) ||\n        player.lastName.toLowerCase().includes(lowerQuery) ||\n        player.email.toLowerCase().includes(lowerQuery)\n      );\n    }\n    \n    return {\n      success: true,\n      players: filtered,\n      count: filtered.length\n    };\n  }\n  \n  static async createPlayer(playerData: Partial<MockPlayer>) {\n    await new Promise(resolve => setTimeout(resolve, 200));\n    \n    const newPlayer: MockPlayer = {\n      id: (mockPlayers.length + 1).toString(),\n      email: playerData.email!,\n      firstName: playerData.firstName!,\n      lastName: playerData.lastName!,\n      phone: playerData.phone,\n      ageGroup: playerData.ageGroup || 'AGES_21_PLUS',\n      birthdayMonth: playerData.birthdayMonth,\n      birthdayDay: playerData.birthdayDay,\n      fargoRating: playerData.fargoRating,\n      apaEightBallRank: playerData.apaEightBallRank,\n      apaNineBallRank: playerData.apaNineBallRank,\n      inHouseRating: playerData.inHouseRating,\n      createdAt: new Date()\n    };\n    \n    mockPlayers.push(newPlayer);\n    \n    return {\n      success: true,\n      player: newPlayer\n    };\n  }\n  \n  // Tournament operations\n  static async findTournaments() {\n    await new Promise(resolve => setTimeout(resolve, 150));\n    return mockTournaments;\n  }\n  \n  static async createTournament(tournamentData: Partial<MockTournament>) {\n    await new Promise(resolve => setTimeout(resolve, 300));\n    \n    const newTournament: MockTournament = {\n      id: (mockTournaments.length + 1).toString(),\n      name: tournamentData.name!,\n      description: tournamentData.description,\n      startDate: tournamentData.startDate!,\n      endDate: tournamentData.endDate,\n      venueId: tournamentData.venueId!,\n      venue: mockVenues.find(v => v.id === tournamentData.venueId),\n      isStarted: false,\n      isCompleted: false,\n      estimatedEntrants: tournamentData.estimatedEntrants,\n      entryFee: tournamentData.entryFee,\n      defaultChipsPerPlayer: tournamentData.defaultChipsPerPlayer,\n      access: tournamentData.access || 'PUBLIC',\n      createdAt: new Date()\n    };\n    \n    mockTournaments.push(newTournament);\n    \n    return {\n      success: true,\n      tournament: newTournament\n    };\n  }\n  \n  // Venue operations\n  static async findVenues(query?: string) {\n    await new Promise(resolve => setTimeout(resolve, 100));\n    \n    let filtered = mockVenues;\n    \n    if (query) {\n      const lowerQuery = query.toLowerCase();\n      filtered = mockVenues.filter(venue => \n        venue.name.toLowerCase().includes(lowerQuery) ||\n        (venue.address && venue.address.toLowerCase().includes(lowerQuery))\n      );\n    }\n    \n    return {\n      success: true,\n      venues: filtered,\n      count: filtered.length\n    };\n  }\n  \n  static async createVenue(venueData: Partial<MockVenue>) {\n    await new Promise(resolve => setTimeout(resolve, 250));\n    \n    const newVenue: MockVenue = {\n      id: (mockVenues.length + 1).toString(),\n      name: venueData.name!,\n      address: venueData.address,\n      phone: venueData.phone,\n      email: venueData.email,\n      ageRestriction: venueData.ageRestriction || 'MINORS_ALLOWED_ALL_DAY',\n      minorStartTime: venueData.minorStartTime,\n      minorEndTime: venueData.minorEndTime,\n      ages18To20StartTime: venueData.ages18To20StartTime,\n      ages18To20EndTime: venueData.ages18To20EndTime,\n      useVenueAgeForAllTables: venueData.useVenueAgeForAllTables ?? true,\n      totalTables: venueData.totalTables || 1,\n      ownerId: venueData.ownerId,\n      tables: [],\n      createdAt: new Date()\n    };\n    \n    mockVenues.push(newVenue);\n    \n    return {\n      success: true,\n      venue: newVenue\n    };\n  }\n}\n\n// React hook for using mock database with proper state management\nexport function useMockDatabase() {\n  const [isConnected, setIsConnected] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  useEffect(() => {\n    // Simulate database connection check\n    const checkConnection = async () => {\n      try {\n        await new Promise(resolve => setTimeout(resolve, 500));\n        setIsConnected(true);\n        setError(null);\n      } catch (err) {\n        setError('Failed to connect to mock database');\n        setIsConnected(false);\n      }\n    };\n    \n    checkConnection();\n  }, []);\n  \n  return {\n    isConnected,\n    error,\n    MockDatabaseService\n  };\n}\n\nexport default MockDatabaseService;"